

<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Qemu运行基本的arm64 环境 &mdash; notes v1.0 文档</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5a3fd9cb"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/translations.js?v=beaddf03"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="prev" title="android documentation" href="../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            notes
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="搜索文档" aria-label="搜索文档" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="导航菜单">
              <p class="caption" role="heading"><span class="caption-text">linux:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Qemu运行基本的arm64 环境</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">0.环境</a></li>
<li class="toctree-l2"><a class="reference internal" href="#qemuarm64-linux">1. 使用qemu运行arm64 linux系统</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#linux">1.1 下载linux 内核</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ubuntu">1.2 制作Ubuntu 发行版的根文件系统</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#debootstrap">1.2.1. 安装 debootstrap 工具：</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">1.2.2. 用 debootstrap 工具：</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">1.2.3 debootstrap 制作第二阶段</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ext4">1.2.4 制作 ext4 文件系统</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#qemu">1.3 运行 qemu</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">1.4 主机和 虚拟机共享 目录</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="移动版导航菜单" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">notes</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="页面导航">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Qemu运行基本的arm64 环境</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/android/Qemu运行基本的arm64环境.md.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="qemuarm64">
<h1>Qemu运行基本的arm64 环境<a class="headerlink" href="#qemuarm64" title="Link to this heading"></a></h1>
<section id="id1">
<h2>0.环境<a class="headerlink" href="#id1" title="Link to this heading"></a></h2>
<p>前置实验环境为：</p>
<ul class="simple">
<li><p>ubuntu20</p></li>
<li><p>linux 内核 5.0</p></li>
<li><p>qemu版本 4.2</p></li>
<li><p>gdb : 9.1</p></li>
</ul>
<p>安装环境命令</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>net-tools<span class="w"> </span>libncurses5-dev<span class="w"> </span>libssl-dev<span class="w"> </span>build-essential<span class="w"> </span>openssl<span class="w"> </span>qemu-system-arm<span class="w"> </span>libncurses5-dev<span class="w"> </span>gcc-aarch64-linux-gnu<span class="w"> </span>git<span class="w"> </span>bison<span class="w"> </span>flex<span class="w"> </span>bc<span class="w"> </span>vim<span class="w"> </span>universal-ctags<span class="w"> </span>cscope<span class="w"> </span>cmake<span class="w"> </span>python3-dev<span class="w"> </span>gdb-multiarch<span class="w"> </span>openjdk-13-jre<span class="w"> </span>trace-cmd<span class="w"> </span>kernelshark<span class="w"> </span>bpfcc-tools<span class="w"> </span>cppcheck<span class="w"> </span>docker<span class="w"> </span>docker.io<span class="w"> </span>libelf-dev<span class="w"> </span>gcc-7<span class="w"> </span>xterm<span class="w"> </span>curl<span class="w"> </span>clang<span class="w"> </span>exuberant-ctags<span class="w"> </span>python-is-python3

sudo<span class="w"> </span>apt<span class="w"> </span>build-dep<span class="w"> </span>linux-image-generic
</pre></div>
</div>
</section>
<section id="qemuarm64-linux">
<h2>1. 使用qemu运行arm64 linux系统<a class="headerlink" href="#qemuarm64-linux" title="Link to this heading"></a></h2>
<section id="linux">
<h3>1.1 下载linux 内核<a class="headerlink" href="#linux" title="Link to this heading"></a></h3>
<p>下载linux5.10.15内核： https://mirrors.tuna.tsinghua.edu.cn/kernel/v5.x/linux-5.10.15.tar.xz
解压：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tar</span> <span class="o">-</span><span class="n">Jxf</span> <span class="n">linux</span><span class="o">-</span><span class="mf">5.10.15</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">xz</span>
</pre></div>
</div>
<p>除了手动配置 Linux 内核的选项之外，还可以直接复制 Ubuntu Linux 系统中自带的配置文件。需要 比 linux5.10.15低或则相同的 linux版本config</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cp /boot/config-5.4.0-26-generic .config
make olddefconfig
make -j$(nproc)
</pre></div>
</div>
</section>
<section id="ubuntu">
<h3>1.2 制作Ubuntu 发行版的根文件系统<a class="headerlink" href="#ubuntu" title="Link to this heading"></a></h3>
<p>​	Ubuntu 系统提供的 debootstrap 工具可以帮助我们快速创建指定架构的根文件系统。本实验要求使用 debootstrap 工具来创建基于 Ubuntu Linux 20.04 系统的根文件系统，并且要求能够在 QEMU + ARM 实验平台上正确挂载和引导系统。</p>
<section id="debootstrap">
<h4>1.2.1. 安装 debootstrap 工具：<a class="headerlink" href="#debootstrap" title="Link to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">binfmt</span><span class="o">-</span><span class="n">support</span> <span class="n">qemu</span> <span class="n">qemu</span><span class="o">-</span><span class="n">user</span><span class="o">-</span><span class="n">static</span> <span class="n">debootstrap</span>
</pre></div>
</div>
</section>
<section id="id2">
<h4>1.2.2. 用 debootstrap 工具：<a class="headerlink" href="#id2" title="Link to this heading"></a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">-</span><span class="n">p</span> <span class="n">myrootfs_arm64</span>
<span class="n">sudo</span> <span class="n">debootstrap</span> <span class="o">--</span><span class="n">arch</span><span class="o">=</span><span class="n">arm64</span> <span class="o">--</span><span class="n">foreign</span> <span class="n">buster</span> <span class="n">myrootfs_arm64</span><span class="o">/</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">mirrors</span><span class="o">.</span><span class="n">ustc</span><span class="o">.</span><span class="n">edu</span><span class="o">.</span><span class="n">cn</span><span class="o">/</span><span class="n">debian</span><span class="o">/</span>
</pre></div>
</div>
<ul>
<li><p>--arch：指定要制作文件系统的处理器体系结构，比如 arm64</p></li>
<li><p>buster：指定 Debian 的版本。buster 是 Debian 10 系统。</p></li>
<li><p>myrootfs_arm64：本地目录，最后制作好的文件系统会在此目录</p>
<p>执行该命令遇到错误</p>
</li>
<li><blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">debootstrap</span> <span class="o">--</span><span class="n">arch</span><span class="o">=</span><span class="n">arm64</span> <span class="o">--</span><span class="n">foreign</span> <span class="n">buster</span> <span class="n">myrootfs_arm64</span><span class="o">/</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">mirrors</span><span class="o">.</span><span class="n">ustc</span><span class="o">.</span><span class="n">edu</span><span class="o">.</span><span class="n">cn</span><span class="o">/</span><span class="n">debian</span><span class="o">/</span>
<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">debootstrap</span><span class="p">:</span> <span class="mi">1609</span><span class="p">:</span> <span class="n">cannot</span> <span class="n">create</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">nvmeon1p2</span><span class="o">/</span><span class="n">linux</span><span class="o">-</span><span class="mf">5.10.15</span><span class="o">/</span><span class="n">myrootfs_arm64</span><span class="o">/</span><span class="n">test</span><span class="o">-</span><span class="n">dev</span><span class="o">-</span><span class="n">null</span><span class="p">:</span> <span class="n">Permission</span> <span class="n">denied</span>
<span class="n">E</span><span class="p">:</span> <span class="n">Cannot</span> <span class="n">install</span> <span class="n">into</span> <span class="n">target</span> <span class="s1">&#39;/home/nvmeon1p2/linux-5.10.15/myrootfs_arm64&#39;</span> <span class="n">mounted</span> <span class="k">with</span> <span class="n">noexec</span> <span class="ow">or</span> <span class="n">nodev</span>
</pre></div>
</div>
</div></blockquote>
<p>错误是说 当前 /home/nvmeon1p2/ 挂载的根文件目录 存在nodev</p>
<p>nodev 和 nosuid 是 Linux 中的挂载选项，控制设备文件系统的行为。nodev 禁止在特定挂载点上使用设备唯一标识符（主设备号和次设备号），nosuid 则避免在执行二进制文件时使用 SUID 位，这增加了系统的安全性。</p>
</li>
</ul>
<p>解决方法：</p>
<p>​	查看当前目录挂载的文件系统</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mount</span> <span class="o">|</span> <span class="n">grep</span> <span class="s2">&quot;/home/nvmeon1p2&quot;</span>
<span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">nvme0n1p2</span> <span class="n">on</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">nvmeon1p2</span> <span class="nb">type</span> <span class="n">ext4</span> <span class="p">(</span><span class="n">rw</span><span class="p">,</span><span class="n">nosuid</span><span class="p">,</span><span class="n">nodev</span><span class="p">,</span><span class="n">relatime</span><span class="p">,</span><span class="n">x</span><span class="o">-</span><span class="n">gvfs</span><span class="o">-</span><span class="n">show</span><span class="p">)</span>
</pre></div>
</div>
<p>​	修改fstab将 /home/nvmeon1p2变成如下格式</p>
<p><img alt="img" src="file:///C:%5CUsers%5Cmc%5CAppData%5CRoaming%5CTencent%5CUsers%5C2961606511%5CQQ%5CWinTemp%5CRichOle%5BJ%7DCPJ%5B7D%7BAMJF38U%7B5%24K%245.png" /></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">vim</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">fstab</span>
<span class="n">LABEL</span><span class="o">=</span><span class="n">nvmeon1p2</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">nvmeon1p2</span> <span class="n">auto</span> <span class="n">defaults</span><span class="p">,</span><span class="n">nofail</span><span class="p">,</span><span class="n">x</span><span class="o">-</span><span class="n">gvfs</span><span class="o">-</span><span class="n">show</span>  <span class="mi">0</span>  <span class="mi">0</span>
</pre></div>
</div>
</section>
<section id="id3">
<h4>1.2.3 debootstrap 制作第二阶段<a class="headerlink" href="#id3" title="Link to this heading"></a></h4>
<p>​	因为主机跑在 x86 架构上，而我们要制作的文件系统是跑在 ARM64 上，因此可以使用 qemu-aarch64-static 来模拟成 arm64 环境的执行环境。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>cp<span class="w"> </span>/usr/bin/qemu-aarch64-static<span class="w"> </span>myrootfs_arm64/usr/bin/
<span class="c1">#下面使用 debootstrap 命令进行软件包的安装和配置。</span>
chroot<span class="w"> </span>myrootfs_arm64/<span class="w"> </span>debootstrap/debootstrap<span class="w"> </span>--second-stage
</pre></div>
</div>
<p>​	设置根文件系统用户名和密码</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1">#使用 chroot 命令切换到刚才制作的根文件系统</span>
sudo<span class="w"> </span>chroot<span class="w"> </span>myrootfs_arm64/
<span class="c1">#为 root 用户设置密码：</span>
passwd<span class="w"> </span>root
<span class="c1">#安装 net-tools 工具。我们以后会用到 ifconfig 工具。</span>
apt<span class="w"> </span>update
apt<span class="w"> </span>install<span class="w"> </span>net-tools<span class="w"> </span>build-essential
</pre></div>
</div>
<p>​	配置网卡支持 DHCP 协议。修改/etc/network/interfaces 文件，增加如下内容。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>auto<span class="w"> </span>lo<span class="w"> 				</span><span class="c1"># 这一行表示当系统启动时，lo 接口（即 回环接口）将被自动启用和配置。</span>
iface<span class="w"> </span>lo<span class="w"> </span>inet<span class="w"> </span>loopback<span class="w">  </span><span class="c1">#iface 表示这是一个网络接口配置  lo 是接口名称  inet 表示这个接口使用的是 IPv4 地址	loopback 指定该接口为回环地址，即 127.0.0.1。</span>
allow-hotplug<span class="w"> </span>enp0s1<span class="w">   </span><span class="c1">#这一行指定 enp0s1 网络接口可以在 热插拔 时自动启用 allow-hotplug 表示当设备（如网络卡）被插入或连接时，系统会自动配置该接口</span>
iface<span class="w"> </span>enp0s1<span class="w"> </span>inet<span class="w"> </span>dhcp<span class="w">  </span><span class="c1">#表示该接口通过 DHCP 协议动态获取 IP 地址</span>
</pre></div>
</div>
</section>
<section id="ext4">
<h4>1.2.4 制作 ext4 文件系统<a class="headerlink" href="#ext4" title="Link to this heading"></a></h4>
<p>​	(1) 首先使用 dd命令来创建一个 image 文件。bs=1M 表示block 大小，count=2048,表示该 image 大小为 2GB</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>/dev/zero<span class="w"> </span><span class="nv">of</span><span class="o">=</span>myrootfs_arm64.ext4<span class="w"> </span><span class="nv">bs</span><span class="o">=</span>1M<span class="w"> </span><span class="nv">count</span><span class="o">=</span><span class="m">2048</span>
</pre></div>
</div>
<p>​	(2) 使用 mkfs.ext4 命令来格式化</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkfs</span><span class="o">.</span><span class="n">ext4</span> <span class="n">myrootfs_arm64</span><span class="o">.</span><span class="n">ext4</span>
</pre></div>
</div>
<p>​	(3) 挂载 ext4 文件系统并拷贝内容</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>-p<span class="w"> </span>tmpfs
sudo<span class="w"> </span>mount<span class="w"> </span>-t<span class="w"> </span>ext4<span class="w"> </span>myrootfs_arm64.ext4<span class="w"> </span>tmpfs/<span class="w"> </span>-o<span class="w"> </span>loop
sudo<span class="w"> </span>cp<span class="w"> </span>-af<span class="w"> </span>myrootfs_arm64/*<span class="w"> </span>tmpfs/
sudo<span class="w"> </span>umount<span class="w"> </span>tmpfs
chmod<span class="w"> </span><span class="m">777</span><span class="w"> </span>myrootfs_arm64.ext4
</pre></div>
</div>
<p>文件系统就做完了</p>
</section>
</section>
<section id="qemu">
<h3>1.3 运行 qemu<a class="headerlink" href="#qemu" title="Link to this heading"></a></h3>
<p>​	编译内核</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export ARCH=arm64
export CROSS_COMPILE=aarch64-linux-gnu-
make defconfig
make -j$(nproc)
</pre></div>
</div>
<p>​	qemu 运行</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">qemu</span><span class="o">-</span><span class="n">system</span><span class="o">-</span><span class="n">aarch64</span> \
  <span class="o">-</span><span class="n">m</span> <span class="mi">1024</span> \
  <span class="o">-</span><span class="n">cpu</span> <span class="n">cortex</span><span class="o">-</span><span class="n">a57</span> \
  <span class="o">-</span><span class="n">M</span> <span class="n">virt</span> \
  <span class="o">-</span><span class="n">nographic</span> \
  <span class="o">-</span><span class="n">smp</span> <span class="mi">4</span> \
  <span class="o">-</span><span class="n">kernel</span> <span class="n">arch</span><span class="o">/</span><span class="n">arm64</span><span class="o">/</span><span class="n">boot</span><span class="o">/</span><span class="n">Image</span> \
  <span class="o">-</span><span class="n">append</span> <span class="s2">&quot;noinitrd sched_debug root=/dev/vda rootfstype=ext4 rw crashkernel=256M loglevel=8&quot;</span> \
  <span class="o">-</span><span class="n">drive</span> <span class="k">if</span><span class="o">=</span><span class="n">none</span><span class="p">,</span><span class="n">file</span><span class="o">=</span><span class="n">myrootfs_arm64</span><span class="o">.</span><span class="n">ext4</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">hd0</span> \
  <span class="o">-</span><span class="n">device</span> <span class="n">virtio</span><span class="o">-</span><span class="n">blk</span><span class="o">-</span><span class="n">device</span><span class="p">,</span><span class="n">drive</span><span class="o">=</span><span class="n">hd0</span> \
  <span class="o">-</span><span class="n">fsdev</span> <span class="n">local</span><span class="p">,</span><span class="nb">id</span><span class="o">=</span><span class="n">kmod_dev</span><span class="p">,</span><span class="n">path</span><span class="o">=/</span><span class="n">home</span><span class="o">/</span><span class="n">nvmeon1p2</span><span class="o">/</span><span class="n">linux</span><span class="o">-</span><span class="mf">5.10.15</span><span class="o">/</span><span class="n">kmodules</span><span class="p">,</span><span class="n">security_model</span><span class="o">=</span><span class="n">none</span> \
  <span class="o">-</span><span class="n">device</span> <span class="n">virtio</span><span class="o">-</span><span class="mi">9</span><span class="n">p</span><span class="o">-</span><span class="n">pci</span><span class="p">,</span><span class="n">fsdev</span><span class="o">=</span><span class="n">kmod_dev</span><span class="p">,</span><span class="n">mount_tag</span><span class="o">=</span><span class="n">kmod_mount</span>
</pre></div>
</div>
</section>
<section id="id4">
<h3>1.4 主机和 虚拟机共享 目录<a class="headerlink" href="#id4" title="Link to this heading"></a></h3>
<p>​	QEMU 提供了多种文件共享方式，最常用的方式是使用 <strong>virtio-9p</strong> 文件系统，您可以通过以下步骤共享文件：</p>
<ol>
<li><p>在宿主机上指定共享目录。</p></li>
<li><p>使用 <code class="docutils literal notranslate"><span class="pre">virtio-9p</span></code> 或 <code class="docutils literal notranslate"><span class="pre">virtio-fs</span></code> 在启动 QEMU 时挂载共享目录。</p></li>
<li><p>在虚拟机中挂载共享的目录。</p>
<p>​</p>
<p>​</p>
<p>使用 <code class="docutils literal notranslate"><span class="pre">virtio-9p</span></code> 设备来共享文件，假设我想共享的目录 为 <code class="docutils literal notranslate"><span class="pre">/home/nvmeon1p2/linux-5.10.15/kmodules</span></code> ，关键点是</p>
</li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1">#：指定宿主机上的共享目录路径 /home/nvmeon1p2/linux-5.10.15/kmodules</span>
-fsdev<span class="w"> </span>local,id<span class="o">=</span>kmod_dev,path<span class="o">=</span>/home/nvmeon1p2/linux-5.10.15/kmodules,security_model<span class="o">=</span>none
<span class="c1">#：将宿主机的共享目录映射到虚拟机中。</span>
-device<span class="w"> </span>virtio-9p-pci,fsdev<span class="o">=</span>kmod_dev,mount_tag<span class="o">=</span>kmod_mount
</pre></div>
</div>
<p>​	在进入虚拟环境后还需要手动挂载</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mount</span> <span class="o">-</span><span class="n">t</span> <span class="mi">9</span><span class="n">p</span> <span class="o">-</span><span class="n">o</span> <span class="n">trans</span><span class="o">=</span><span class="n">virtio</span><span class="p">,</span><span class="n">kernel_version</span> <span class="n">kmod_mount</span> <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">kmodules</span>
</pre></div>
</div>
<p>自动挂载方式：</p>
<p>​	进入虚拟机 修改 /etc/fstab文件, 其中  kmod_mount，是启动时指定的mount_tag ，必须一致</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kmod_mount</span>  <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">kmodules</span>  <span class="mi">9</span><span class="n">p</span>  <span class="n">trans</span><span class="o">=</span><span class="n">virtio</span><span class="p">,</span><span class="n">kernel_version</span>  <span class="mi">0</span>  <span class="mi">0</span>
</pre></div>
</div>
<p>![img](file:///C:\Users\mc\Documents\WeChat Files\wxid_r7lv93vdskil22\FileStorage\Temp\1739323046385.jpg)</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="页脚">
        <a href="../index.html" class="btn btn-neutral float-left" title="android documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2025, &lt;li.yunjun&gt;。</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用的 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a> 开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>